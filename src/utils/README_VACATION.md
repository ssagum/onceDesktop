# 휴가 관리 시스템 가이드

## 개요

이 휴가 관리 시스템은 입사일을 기준으로 사용자의 휴가 일수를 자동 계산하고 관리하는 기능을 제공합니다. 주요 특징은 다음과 같습니다:

- 입사일 기준으로 매월 1일씩 휴가 일수 증가
- 사용자 문서에 기사용 휴가 일수만 저장하고 입사일로부터 계산하여 효율적으로 관리
- 다양한 휴가 유형(휴가, 반차, 경조사) 지원
- 휴가 신청 기록 관리

## 데이터 구조

### 사용자 문서 (users 컬렉션)

사용자 문서에는 다음과 같은 휴가 관련 필드가 추가됩니다:

- `hireDate`: 입사일 (yyyy-MM-dd 형식 문자열 또는 Timestamp 객체)
- `usedVacationDays`: 기사용 휴가 일수 (숫자)

### 휴가 신청 문서 (vacations 컬렉션)

휴가 신청 정보는 별도의 컬렉션에 저장됩니다:

- `userId`: 사용자 ID
- `userName`: 사용자 이름
- `vacationType`: 휴가 유형 ("휴가", "반차", "경조사")
- `startDate`: 시작일 (yyyy-MM-dd 형식)
- `endDate`: 종료일 (yyyy-MM-dd 형식)
- `startTime`: 시작 시간 (HH:mm 형식)
- `endTime`: 종료 시간 (HH:mm 형식)
- `reason`: 휴가 사유
- `days`: 사용 일수
- `dayTypes`: 각 날짜별 상세 정보 (반차 여부, 시간 등)
- `status`: 승인 상태 ("대기중", "승인됨", "거부됨")
- `createdAt`: 신청일시

## 휴가 일수 계산 방식

시스템은 다음과 같은 방식으로 휴가 일수를 계산합니다:

1. **총 누적 휴가 일수(totalAccumulatedDays)** : 입사일로부터 현재까지 매월 1일씩 발생한 휴가 일수 합계
2. **기사용 휴가 일수(usedVacationDays)** : 지금까지 사용한 휴가 일수의 합계 (데이터베이스에 저장)
3. **잔여 휴가 일수(remainingVacationDays)** : 총 누적 휴가 일수 - 기사용 휴가 일수

이 방식을 통해 입사일만 저장하고 현재 시점에서 동적으로 가용 휴가 일수를 계산함으로써 매월 수동으로 휴가 일수를 업데이트할 필요가 없습니다.

## 주요 함수

### vacationUtils.js

휴가 관리를 위한 유틸리티 함수들이 포함되어 있습니다:

1. **calculateTotalAccumulatedDays**: 입사일 기준으로 발생한 총 누적 휴가 일수를 계산
2. **getUserVacationInfo**: 사용자의 휴가 정보(입사일, 기사용일수, 총 누적 일수, 잔여일수 등) 조회
3. **updateUserVacationDays**: 사용자의 기사용 휴가 일수 업데이트
4. **getUserVacationHistory**: 사용자의 휴가 신청 기록 조회

### VacationModal.js

휴가 신청 모달 컴포넌트로 다음 기능을 제공합니다:

1. 사용자의 잔여 휴가 일수 표시
2. 다양한 휴가 유형 선택 (휴가, 반차, 경조사)
3. 날짜 및 시간 선택
4. 신청자 및 대체자 설정
5. 휴가 일수 자동 계산
6. 휴가 신청 및 저장

## 사용 방법

### 사용자 등록 시

1. 회원가입 시 입사일 정보를 입력합니다.
2. 입사일은 휴가 일수 계산의 기준점이 됩니다.

### 휴가 신청 시

1. 휴가 유형 선택 (휴가, 반차, 경조사)
2. 날짜 및 시간 선택
3. 대체자 지정 (선택사항)
4. 사유 입력
5. 신청 버튼 클릭

### 관리자 기능

1. 사용자별 휴가 정보 조회
2. 휴가 신청 승인/거부
3. 휴가 사용 통계 확인

## 주의사항

1. 경조사는 휴가 일수에 포함되지 않습니다.
2. 일요일은 자동으로 휴가 계산에서 제외됩니다.
3. 공휴일은 수동으로 제외 일수에 입력해야 합니다.
4. 반차는 0.5일로 계산됩니다.
